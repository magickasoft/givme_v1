"use strict";function GmAPI(t,e,n,a,r,i){this.apiKey="",this._login=function(t){return e.post("http://"+r+"/rest-auth/facebook/",{access_token:t}).then(function(t){return t})["catch"](function(t){return t})},this.loginViaFacebook=function(){var t=this;return a.login().then(function(e){return t._login(e.access_token).then(function(e){return e.data?(t.apiKey=e.data.key||"",!0):!1})["catch"](function(t){return t})})["catch"](function(t){return t})},this.requestGame=function(){var n=this,a=t.defer();return e.get("http://"+r+"/api/games/request/?format=json",{headers:{Authorization:"Token "+n.apiKey}}).then(function(t){var e=new WebSocket("ws://52.18.229.105/ws/game?token="+n.apiKey+"&subscribe-user&echo");a.resolve({game:t.data,socket:e})})["catch"](function(t){a.resolve({game:{players:[{first_name:"Martha",last_name:"Williams",age:28,languages:[],tags:[]},{first_name:"Martha",last_name:"Williams",age:28,languages:[],tags:[]}]},socket:{}})}),a.promise},this.rejectPlayer=function(t){var n=this;return e({method:"POST",url:"http://"+r+"/api/users/"+t+"/reject/",headers:{Authorization:"Token "+n.apiKey}}).then(function(t){return t})["catch"](function(t){return t})},this.acceptPlayer=function(t){var n=this;return e({method:"POST",url:"http://"+r+"/api/users/"+t+"/accept/",headers:{Authorization:"Token "+n.apiKey}}).then(function(t){return t})["catch"](function(t){return t})}}angular.module("givmeApp.services").service("GmAPI",GmAPI),angular.module("givmeApp").constant("gmAPIServerIP","52.18.229.105");